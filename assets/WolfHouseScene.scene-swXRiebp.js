import{r as t,j as o,H,c as x,s as g}from"./index-B7MQfEto.js";import{g as a}from"./index-D3jsOSc0.js";import{P as E,H as e,T}from"./Hill.model-CTCAhGQk.js";import{H as W}from"./HouseAndPig-Bjh2pTv8.js";import{W as Y}from"./Wolf.model-Bv3QyRfI.js";import"./GLTFLoader-2y1D3bYy.js";import"./House.model-3tUQFolt.js";const J=({selectedPig:n,setCurrentScene:c,setIsFlashing:u})=>{const[i,j]=t.useState({x:-10,z:-5}),[p,m]=t.useState(!1),[P,S]=t.useState("hidden"),l=t.useRef({y:-1}),r=t.useRef({y:-.755});t.useEffect(()=>{Math.floor(i.x)===-4&&!p&&(m(!0),a.to(l.current,{y:-.5,duration:.85,ease:"power3.inOut",yoyo:!1,repeat:2,onComplete:()=>{l.current.y=-1,m(!1)}}))},[i.x,p]),t.useEffect(()=>{let f=window.scrollY;const h=document.body.scrollHeight-window.innerHeight,b=8;let d=window.scrollY,s=null;const w=()=>{const M=-10+(window.scrollY-f)/(h-f)*b,I=Math.min(Math.max(M,-10),-2);j(v=>({...v,x:I})),window.scrollY>d&&!s&&(s=setTimeout(()=>{s=null},300),a.to(r.current,{y:-.655,duration:.15,ease:"power2.out",onComplete:()=>{a.to(r.current,{y:-.755,duration:.15,ease:"power2.in"})}})),d=window.scrollY,window.scrollY===h&&S("inline")};return window.addEventListener("scroll",w),()=>{window.removeEventListener("scroll",w),s&&clearTimeout(s)}},[]);const y=()=>{console.log("wind"),u(!0),setTimeout(()=>{c(n==="straw"||n==="wooden"?"afterblow":"finalScene"),u(!1)},1e3)};return o.jsxs(o.Fragment,{children:[o.jsx(E,{makeDefault:!0,position:[i.x+2,0,7],rotation:[0,0,0]}),o.jsxs("mesh",{rotation:[-Math.PI*.5,0,-Math.PI*.2],position:[0,-1.5,0],children:[o.jsx("planeGeometry",{args:[100,100]}),o.jsx("meshStandardMaterial",{color:"green"})]}),o.jsxs("group",{name:"Hills",children:[o.jsx(e,{scale:5,position:[-35,1,-25],rotation:[0,0,0]}),o.jsx(e,{scale:7,position:[-24,2,-45],rotation:[0,Math.PI*.1,0]}),o.jsx(e,{scale:4,position:[-18.5,.7,-55],rotation:[0,-Math.PI*.7,0]}),o.jsx(e,{scale:12,position:[0,4,-100],rotation:[0,Math.PI*.4,0]}),o.jsx(e,{scale:8,position:[18.5,2.5,-55],rotation:[0,-Math.PI*.7,0]}),o.jsx(e,{scale:10,position:[20,3,-45],rotation:[0,Math.PI*.7,0]}),o.jsx(e,{scale:8,position:[50,2.25,-45],rotation:[0,Math.PI*.7,0]})]}),o.jsx(Y,{scale:.75,position:[i.x,r.current.y,1],rotation:[0,Math.PI*.3,0]}),o.jsx("group",{rotation:[0,-Math.PI*.3,0],children:o.jsx(W,{path:`./models/${n}_house.glb`,houseScale:2.5,housePosition:[2.5,1,-1],rotation:[0,0,0],pigScale:.5,pigPosition:[2.2,l.current.y,.4]})}),o.jsxs(T,{font:"./fonts/luckiest_guy.json",size:.2,height:.2,curveSegments:8,bevelEnabled:!0,bevelThickness:.05,bevelSize:.01,bevelOffset:0,bevelSegments:8,position:[-9.9,2.5,0],rotation:[Math.PI*.075,0,0],children:[`Little pig, little pig let me in! 
    Or I'll huff and puff and I'll  
            blow your house in!`,o.jsx("meshPhysicalMaterial",{color:"#FFFFFF",metalness:.1,roughness:.4,emissive:"#000",emissiveIntensity:.3,clearcoat:.5,clearcoatRoughness:.1})]}),P==="inline"&&o.jsx("group",{position:[0,0,-2],children:o.jsx(H,{className:x(g["button-outer-wrapper"]),children:o.jsx("div",{className:x(g["button-outer-wrapper--button-wrapper"]),children:o.jsx("button",{onClick:y,children:"Blow"})})})})]})};export{J as default};
