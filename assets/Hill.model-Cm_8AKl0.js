import{B as H,E as k,L as O,F as B,S as q,d as D,p as W,e as V,r as m,f as J,_ as j,b as E,W as Z,g as $,h as P,D as K,i as Q,a as U,u as X,j as Y}from"./index-CeVE9-Cx.js";import{G as ee}from"./GLTFLoader-fVhQ_DXS.js";function te(t,e=1e-4){e=Math.max(e,Number.EPSILON);const r={},o=t.getIndex(),f=t.getAttribute("position"),i=o?o.count:f.count;let c=0;const a=Object.keys(t.attributes),u={},d={},l=[],p=["getX","getY","getZ","getW"];for(let s=0,n=a.length;s<n;s++){const g=a[s];u[g]=[];const b=t.morphAttributes[g];b&&(d[g]=new Array(b.length).fill(0).map(()=>[]))}const h=Math.log10(1/e),A=Math.pow(10,h);for(let s=0;s<i;s++){const n=o?o.getX(s):s;let g="";for(let b=0,F=a.length;b<F;b++){const x=a[b],w=t.getAttribute(x),I=w.itemSize;for(let T=0;T<I;T++)g+=`${~~(w[p[T]](n)*A)},`}if(g in r)l.push(r[g]);else{for(let b=0,F=a.length;b<F;b++){const x=a[b],w=t.getAttribute(x),I=t.morphAttributes[x],T=w.itemSize,L=u[x],G=d[x];for(let M=0;M<T;M++){const z=p[M];if(L.push(w[z](n)),I)for(let S=0,N=I.length;S<N;S++)G[S].push(I[S][z](n))}}r[g]=c,l.push(c),c++}}const y=t.clone();for(let s=0,n=a.length;s<n;s++){const g=a[s],b=t.getAttribute(g),F=new b.array.constructor(u[g]),x=new H(F,b.itemSize,b.normalized);if(y.setAttribute(g,x),g in d)for(let w=0;w<d[g].length;w++){const I=t.morphAttributes[g][w],T=new I.array.constructor(d[g][w]),L=new H(T,I.itemSize,I.normalized);y.morphAttributes[g][w]=L}}return y.setIndex(l),y}class re extends k{constructor(e,r={}){const{bevelEnabled:o=!1,bevelSize:f=8,bevelThickness:i=10,font:c,height:a=50,size:u=100,lineHeight:d=1,letterSpacing:l=0,...p}=r;if(c===void 0)super();else{const h=c.generateShapes(e,u,{lineHeight:d,letterSpacing:l});super(h,{...p,bevelEnabled:o,bevelSize:f,bevelThickness:i,depth:a})}this.type="TextGeometry"}}var ne=Object.defineProperty,se=(t,e,r)=>e in t?ne(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,R=(t,e,r)=>(se(t,typeof e!="symbol"?e+"":e,r),r);class oe extends O{constructor(e){super(e)}load(e,r,o,f){const i=new B(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,c=>{if(typeof c!="string")throw new Error("unsupported data type");const a=JSON.parse(c),u=this.parse(a);r&&r(u)},o,f)}loadAsync(e,r){return super.loadAsync(e,r)}parse(e){return new ae(e)}}class ae{constructor(e){R(this,"data"),R(this,"isFont",!0),R(this,"type","Font"),this.data=e}generateShapes(e,r=100,o){const f=[],i={letterSpacing:0,lineHeight:1,...o},c=ie(e,r,this.data,i);for(let a=0,u=c.length;a<u;a++)Array.prototype.push.apply(f,c[a].toShapes(!1));return f}}function ie(t,e,r,o){const f=Array.from(t),i=e/r.resolution,c=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*i,a=[];let u=0,d=0;for(let l=0;l<f.length;l++){const p=f[l];if(p===`
`)u=0,d-=c*o.lineHeight;else{const h=ce(p,i,u,d,r);h&&(u+=h.offsetX+o.letterSpacing,a.push(h.path))}}return a}function ce(t,e,r,o,f){const i=f.glyphs[t]||f.glyphs["?"];if(!i){console.error('THREE.Font: character "'+t+'" does not exists in font family '+f.familyName+".");return}const c=new q;let a,u,d,l,p,h,A,y;if(i.o){const s=i._cachedOutline||(i._cachedOutline=i.o.split(" "));for(let n=0,g=s.length;n<g;)switch(s[n++]){case"m":a=parseInt(s[n++])*e+r,u=parseInt(s[n++])*e+o,c.moveTo(a,u);break;case"l":a=parseInt(s[n++])*e+r,u=parseInt(s[n++])*e+o,c.lineTo(a,u);break;case"q":d=parseInt(s[n++])*e+r,l=parseInt(s[n++])*e+o,p=parseInt(s[n++])*e+r,h=parseInt(s[n++])*e+o,c.quadraticCurveTo(p,h,d,l);break;case"b":d=parseInt(s[n++])*e+r,l=parseInt(s[n++])*e+o,p=parseInt(s[n++])*e+r,h=parseInt(s[n++])*e+o,A=parseInt(s[n++])*e+r,y=parseInt(s[n++])*e+o,c.bezierCurveTo(p,h,A,y,d,l);break}}return{offsetX:i.ha*e,path:c}}let _=null;async function ue(t){return typeof t=="string"?await(await fetch(t)).json():t}function le(t){return _||(_=new oe),_.parse(t)}async function C(t){const e=await ue(t);return le(e)}function v(t){return D(C,[t])}v.preload=t=>W(C,[t]);v.clear=t=>V([t]);const pe=["string","number"],he=t=>{let e="";const r=[];return m.Children.forEach(t,o=>{pe.includes(typeof o)?e+=o+"":r.push(o)}),[e,...r]},be=m.forwardRef(({font:t,letterSpacing:e=0,lineHeight:r=1,size:o=1,height:f=.2,bevelThickness:i=.1,bevelSize:c=.01,bevelEnabled:a=!1,bevelOffset:u=0,bevelSegments:d=4,curveSegments:l=8,smooth:p,children:h,...A},y)=>{m.useMemo(()=>J({RenamedTextGeometry:re}),[]);const s=m.useRef(null),n=v(t),g=m.useMemo(()=>({font:n,size:o,height:f,bevelThickness:i,bevelSize:c,bevelEnabled:a,bevelSegments:d,bevelOffset:u,curveSegments:l,letterSpacing:e,lineHeight:r}),[n,o,f,i,c,a,d,u,l,e,r]),[b,...F]=m.useMemo(()=>he(h),[h]),x=m.useMemo(()=>[b,g],[b,g]);return m.useLayoutEffect(()=>{p&&(s.current.geometry=te(s.current.geometry,p),s.current.geometry.computeVertexNormals())},[x,p]),m.useImperativeHandle(y,()=>s.current,[]),m.createElement("mesh",j({},A,{ref:s}),m.createElement("renamedTextGeometry",{args:x}),F)});function fe(t,e,r){const o=E(h=>h.size),f=E(h=>h.viewport),i=typeof t=="number"?t:o.width*f.dpr,c=o.height*f.dpr,a=(typeof t=="number"?r:t)||{},{samples:u=0,depth:d,...l}=a,p=m.useMemo(()=>{const h=new Z(i,c,{minFilter:P,magFilter:P,type:$,...l});return d&&(h.depthTexture=new K(i,c,Q)),h.samples=u,h},[]);return m.useLayoutEffect(()=>{p.setSize(i,c),u&&(p.samples=u)},[u,p,i,c]),m.useEffect(()=>()=>p.dispose(),[]),p}const me=t=>typeof t=="function",ye=m.forwardRef(({envMap:t,resolution:e=256,frames:r=1/0,makeDefault:o,children:f,...i},c)=>{const a=E(({set:n})=>n),u=E(({camera:n})=>n),d=E(({size:n})=>n),l=m.useRef(null);m.useImperativeHandle(c,()=>l.current,[]);const p=m.useRef(null),h=fe(e);m.useLayoutEffect(()=>{i.manual||(l.current.aspect=d.width/d.height)},[d,i]),m.useLayoutEffect(()=>{l.current.updateProjectionMatrix()});let A=0,y=null;const s=me(f);return U(n=>{s&&(r===1/0||A<r)&&(p.current.visible=!1,n.gl.setRenderTarget(h),y=n.scene.background,t&&(n.scene.background=t),n.gl.render(n.scene,l.current),n.scene.background=y,n.gl.setRenderTarget(null),p.current.visible=!0,A++)}),m.useLayoutEffect(()=>{if(o){const n=u;return a(()=>({camera:l.current})),()=>a(()=>({camera:n}))}},[l,o,a]),m.createElement(m.Fragment,null,m.createElement("perspectiveCamera",j({ref:l},i),!s&&f),m.createElement("group",{ref:p},s&&f(h.texture)))}),xe=({scale:t,position:e,rotation:r})=>{const o=X(ee,"./models/Hill.glb");return Y.jsx("primitive",{object:o.scene.clone(),scale:t,position:e,rotation:r,receiveShadow:!0,castShadow:!0})};export{xe as H,ye as P,be as T};
